{"version":3,"sources":["020_staticViewport.js","050_mainNav.js","051_fixSiteTitle.js","053_fixCoverHeight.js","099_events.js","001_sw.js","010_throttle.js","090_lazyImages.js"],"names":["setVP","vh","document","documentElement","clientHeight","vw","clientWidth","navClick","nav","classList","toggle","navScroll","contains","window","scrollY","isHome","navButt","style","background","childNodes","opacity","fixSiteTitleMargin","sitetitle","marginLeft","sitetitle_margin","getSiteTitleMargin","getElementById","offsetLeft","fixCoverHeight","cover","height","onresize","e","onscroll","onorientationchange","onDOMload","isLocalhost","Boolean","location","hostname","match","navigator","protocol","serviceWorker","register","then","registration","onupdatefound","controller","installingWorker","installing","onstatechange","state","Error","catch","console","error","throttle","func","limit","inThrottle","lastFunc","lastRan","context","this","args","arguments","clearTimeout","setTimeout","Date","now","apply","onclick","addEventListener","requestAnimationFrame","getElementsByClassName","isInView","wTop","pageYOffset","wBound","innerHeight","cRect","pTop","i","items","length","getBoundingClientRect","top","loadFullImage","remove","item","addImg","appendChild","img","pImg","querySelector","target","alt","removeChild","imgTag","dataset","Image","srcset","sizes","src","className","complete","onload","scroller","timer"],"mappings":"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","file":"main.min.js","sourcesContent":["// staticViewportH.js\n// Gets initial viewport and changes styles accordingly (in static px)\n// And checks again on windows resize / orientation change\n\n/* eslint no-unused-vars: 0 */\n\nvar vh = document.documentElement.clientHeight;\nvar vw = document.documentElement.clientWidth;\nfunction setVP() {\n  vh = document.documentElement.clientHeight;\n  vw = document.documentElement.clientWidth;\n}\n","/* eslint no-unused-vars: 0*/\n/* global vh */\nlet navButt = document.getElementById(\"mainNav-toggle\");\nlet nav = document.getElementById(\"mainNav\");\n\nlet isHome = document.getElementById(\"home\") ? 1 : 0; \nnavButt.onclick = navClick;\nfunction navClick(){\n  nav.classList.toggle('visible');\n  navScroll();\n}\nfunction navScroll(){\n  if (nav.classList.contains('visible') \n    || window.scrollY - vh*isHome > -50){\n    navButt.style.background = \"rgba(0,0,0,.5)\";\n    nav.childNodes[0].style.opacity = .8;\n  }\n  else if(window.scrollY - vh*isHome <  50)  {\n    navButt.style.background = \"none\";\n    nav.childNodes[0].style.opacity = 0;\n  }\n}\n\n","/* global vw */\n/* eslint no-unused-vars: 0*/\n\nvar sitetitle = document.getElementById(\"sitetitle\");\nvar sitetitle_margin = 0;\n\nfunction fixSiteTitleMargin(){\n  if(sitetitle){\n    if(window.scrollY > 0)  sitetitle.style.marginLeft = sitetitle_margin+\"px\";\n    else if(vw>600)         sitetitle.style.marginLeft = \"3rem\";\n    else                    sitetitle.style.marginLeft = \"1rem\";\n  }\n}\nfunction getSiteTitleMargin(){\n  sitetitle_margin = document.getElementById(\"xmargin\").offsetLeft || 0;\n}","/* global vh */\n/* eslint no-unused-vars: 0 */\n\nvar cover = document.getElementById(\"cover\");\nfunction fixCoverHeight(){\n  if(cover){\n    cover.style.height = vh + \"px\";\n    cover.childNodes[0].style.height = vh + \"px\";\n  }\n}","/* eslint no-unused-vars: 0,\n          no-undef: 0 */\n\nif (window.addEventListener){\n  document.addEventListener('DOMContentLoaded', onDOMload, false);\n  window.addEventListener('resize', throttle(onresize, 100), false);\n  window.addEventListener('scroll', throttle(onscroll, 100), false);\n  window.addEventListener('orientationchange', throttle(onorientationchange, 100), false);\n}\n\nfunction onresize(e){\n  onscroll(e);\n}\nfunction onscroll(e){\n  navScroll(e);\n  fixSiteTitleMargin(e);\n}\nfunction onorientationchange(e){\n  setVP(e);\n  fixCoverHeight(e);\n  getSiteTitleMargin(e);\n}\n\nfunction onDOMload(e){\n  onresize(e);\n  onorientationchange(e);\n}","/*!\n *\n *  Web Starter Kit\n *  Copyright 2015 Google Inc. All rights reserved.\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *    https://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License\n *\n */\n/* eslint-env browser */\n/* eslint no-console: 0*/\n(function() {\n  'use strict';\n\n  // Check to make sure service workers are supported in the current browser,\n  // and that the current page is accessed from a secure origin. Using a\n  // service worker from an insecure origin will trigger JS console errors. See\n  // http://www.chromium.org/Home/chromium-security/prefer-secure-origins-for-powerful-new-features\n  let isLocalhost = Boolean(window.location.hostname === 'localhost' ||\n      // [::1] is the IPv6 localhost address.\n      window.location.hostname === '[::1]' ||\n      // 127.0.0.1/8 is considered localhost for IPv4.\n      window.location.hostname.match(\n        /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n      )\n    );\n\n  if ('serviceWorker' in navigator &&\n      (window.location.protocol === 'https:' || isLocalhost)) {\n    navigator.serviceWorker.register('service-worker.js')\n    .then(function(registration) {\n      // updatefound is fired if service-worker.js changes.\n      registration.onupdatefound = function() {\n        // updatefound is also fired the very first time the SW is installed,\n        // and there's no need to prompt for a reload at that point.\n        // So check here to see if the page is already controlled,\n        // i.e. whether there's an existing service worker.\n        if (navigator.serviceWorker.controller) {\n          // The updatefound event implies that registration.installing is set:\n          // https://slightlyoff.github.io/ServiceWorker/spec/service_worker/index.html#service-worker-container-updatefound-event\n          let installingWorker = registration.installing;\n\n          installingWorker.onstatechange = function() {\n            switch (installingWorker.state) {\n              case 'installed':\n                // At this point, the old content will have been purged and the\n                // fresh content will have been added to the cache.\n                // It's the perfect time to display a \"New content is\n                // available; please refresh.\" message in the page's interface.\n                break;\n\n              case 'redundant':\n                throw new Error('The installing ' +\n                                'service worker became redundant.');\n\n              default:\n                // Ignore\n            }\n          };\n        }\n      };\n    }).catch(function(e) {\n      console.error('Error during service worker registration:', e);\n    });\n  }\n\n  // Your custom JavaScript goes here\n})();\n","/* eslint no-unused-vars: 0*/\nvar throttle = function (func, limit) {\n  var inThrottle, lastFunc, lastRan;\n  return function() {\n    var context = this,\n      args = arguments;\n    if (!inThrottle) {\n      func.apply(context, args);\n      lastRan = Date.now();\n      inThrottle = true;\n    } \n    else {\n      clearTimeout(lastFunc);\n      lastFunc = setTimeout(function() {\n        if ((Date.now() - lastRan) >= limit) {\n          func.apply(context, args);\n          lastRan = Date.now();\n        }\n      }, limit - (Date.now() - lastRan));\n    }\n  };\n}","// progressive-image.js\n\nif (window.addEventListener \n  && window.requestAnimationFrame \n  && document.getElementsByClassName) \n  window.addEventListener('load', () => {\n\n  let items = document.getElementsByClassName('lazyImage replace');\n  let timer;\n\n  function isInView() {\n    let wTop = window.pageYOffset;\n    let wBound = wTop + window.innerHeight;\n    let cRect, pTop, pBound;\n    let i = 0;\n    while(i < items.length) {\n      cRect = items[i].getBoundingClientRect();\n      pTop = wTop + cRect.top;\n      pBound = pTop + cRect.height;\n      if (wTop < pBound && wBound > pTop) {\n        loadFullImage(items[i]);\n        items[i].classList.remove('replace');\n      }\n      else i++;\n    }\n  }\n\n  function loadFullImage(item) {\n    if(!item.querySelector) return; // Not compatible\n    let imgTag = item.querySelector('img.preview');\n    if (!item || !imgTag.dataset) return;\n\n    let img = new Image();\n    img.srcset = imgTag.dataset.srcset || '';\n    img.sizes = imgTag.dataset.sizes || '';\n    img.src = imgTag.dataset.src;\n    img.className = 'reveal';\n    if(img.complete)  addImg();\n    else img.onload = addImg;\n    function addImg() {\n      item.appendChild(img).addEventListener('animationend', (e) => {\n        let pImg = item.querySelector && item.querySelector('img.preview');\n        \n        if (pImg) {\n          e.target.alt = pImg.alt || '';\n          item.removeChild(pImg);\n          e.target.classList.remove('reveal');\n        }\n      });\n    }\n  }\n\n  window.window.addEventListener('scroll', scroller, false);\n  window.window.addEventListener('resize', scroller, false);\n\n  function scroller() {\n    timer = timer || setTimeout(() => {\n      timer = null;\n      requestAnimationFrame(isInView);\n    }, 100);\n  }\n})"]}